events {\n  worker_connections 1024;\n}\n\nhttp {\n  include /etc/nginx/mime.types;\n  default_type application/octet-stream;\n  \n  # Gzip compression\n  gzip on;\n  gzip_vary on;\n  gzip_min_length 1024;\n  gzip_types\n    text/plain\n    text/css\n    text/xml\n    text/javascript\n    application/javascript\n    application/xml+rss\n    application/json;\n  \n  server {\n    listen 3000;\n    server_name localhost;\n    \n    root /usr/share/nginx/html;\n    index index.html;\n    \n    # Handle React Router\n    location / {\n      try_files $uri $uri/ /index.html;\n    }\n    \n    # API proxy to backend\n    location /api {\n      proxy_pass http://backend:5000;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection 'upgrade';\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_cache_bypass $http_upgrade;\n    }\n    \n    # Socket.IO proxy\n    location /socket.io/ {\n      proxy_pass http://backend:5000;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_set_header Host $host;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Proto $scheme;\n    }\n    \n    # Static files caching\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg)$ {\n      expires 1y;\n      add_header Cache-Control \"public, immutable\";\n    }\n    \n    # Security headers\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Referrer-Policy \"strict-origin-when-cross-origin\" always;\n  }\n}"